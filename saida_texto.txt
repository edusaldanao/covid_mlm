Nenhum valor nulo foi encontrado nos conjuntos de dados (dados_culturais).
Nenhum valor nulo foi encontrado nos conjuntos de dados (dados_covid).
Verificando duplicatas em dados_culturais...
Verificando duplicatas em dados_covid...
Dimensões antes da fusão: dados_culturais=(121, 9), dados_covid=(121, 3)
Dimensão após a fusão: data=(121, 11)
Dataset 'SI_dataset.csv' gerado e salvo.

=== ANÁLISE DE OUTLIERS ===

Resumo Consolidado de Outliers e Análise de Sensibilidade:
                 Coluna  Número de Outliers (Inicial)  Valor Mínimo (Inicial)  Valor Máximo (Inicial)  Média (Com Outliers)  Média (Sem Outliers)  Diferença Média (%)  Desv. Padrão (Com Outliers)  Desv. Padrão (Sem Outliers)  Diferença Desv. Padrão (%)  IQR Factor Ajustado  Número de Outliers (Ajustado)  Valor Mínimo (Ajustado)  Valor Máximo (Ajustado)
                    PCE                             0                     NaN                     NaN                 44.95                 44.95                 0.00                        26.19                        26.19                        0.00                  3.0                              0                      NaN                      NaN
                    PSP                             0                     NaN                     NaN                 22.78                 22.78                 0.00                        13.44                        13.44                        0.00                  3.0                              0                      NaN                      NaN
                     CT                             0                     NaN                     NaN                 44.14                 44.14                 0.00                        25.79                        25.79                        0.00                  3.0                              0                      NaN                      NaN
                    EEC                             0                     NaN                     NaN                 41.69                 41.69                 0.00                        23.80                        23.80                        0.00                  3.0                              0                      NaN                      NaN
              indice_IE                             0                     NaN                     NaN                 38.39                 38.39                 0.00                        21.52                        21.52                        0.00                  3.0                              0                      NaN                      NaN
 total_casos_por_milhao                             2               8373134.0               9117655.0            1526097.34            1404764.62                 7.95                   1723948.97                   1456646.00                       15.51                  2.0                              2                8373134.0                9117655.0
total_mortes_por_milhao                            14                   192.7                   994.0                 89.30                 36.47                59.16                       179.28                        39.38                       78.03                  1.5                             14                    192.7                    994.0

Total de linhas com pelo menos um outlier (ajustado): 16

Dataset original: 121 linhas; Dataset sem outliers: 105 linhas

=== DISTRIBUIÇÃO DE indice_IE ===
Assimetria (skewness) de indice_IE: -0.204
A distribuição é aproximadamente simétrica (skewness = -0.204), não afetando os testes estatísticos.

Distribuição das categorias de nivel_IE:

nivel_IE:
nivel_IE
1-baixo    0.331
2-medio    0.331
3-alto     0.339
Name: proportion, dtype: float64
A categorização de nivel_IE é relativamente equilibrado (todas as categorias têm pelo menos 20% das observações).

Impacto da assimetria nas provas estatísticas:
A assimetria é baixa (skewness entre -0.5 e 0.5) e não afeta significativamente as provas estatísticas:
- ANOVA: Pode ser usada se os outros pressupostos (normalidade e homogeneidade de variâncias) forem atendidos.
- Qui-quadrado: Resultados são confiáveis, desde que as categorias de nivel_IE estejam razoavelmente balanceadas.
Características selecionadas: ['PCE', 'PSP', 'CT', 'EEC']

=== ESCALANDO AS CARACTERÍSTICAS UMA ÚNICA VEZ POR DATASET ===
Verificando duplicatas no dataset Sem Outliers...
Dataset Sem Outliers: Shape de X antes do dimensionamento: (105, 4)
Dataset Sem Outliers: Shape de X_scaled após o dimensionamento: (105, 4)
Scaler salvado para Sem Outliers em 'scaler_Sem Outliers.joblib'

=== DISTRIBUIÇÃO DE CLASSES POR OBJETIVO ===

Dataset: Sem Outliers

Distribuição de casos_categoria:
casos_categoria
1-baixo    0.286
2-medio    0.390
3-alto     0.324
Name: proportion, dtype: float64

Distribuição de mortes_categoria:
mortes_categoria
1-baixo    0.381
2-medio    0.371
3-alto     0.248
Name: proportion, dtype: float64

Dataset Sem Outliers, Target casos_categoria: Shape de X_scaled: (105, 4), Longitude de y: 105

LabelEncoder para casos_categoria (Sem Outliers): Classes = ['1-baixo', '2-medio', '3-alto']

Entrenando XGBoost para Sem Outliers, casos_categoria

--- BASELINE SILENCIOSO LogisticRegression (termómetro interno) ---
Dataset: Sem Outliers, Target: casos_categoria
Acurácia média CV (baseline): 0.448
F1-score média CV (baseline): 0.415
Melhora XGB vs Baseline - Acurácia: 0.105
Melhora XGB vs Baseline - F1-Score: 0.121
XGBoost mostra robustez clara sobre o baseline (F1 +5% ou mais).

--- Importância das Características para casos_categoria (Sem Outliers) ---

XGBoost (feature importances):
PCE: 0.349
PSP: 0.302
CT: 0.249
EEC: 0.100

Dataset Sem Outliers, Target mortes_categoria: Shape de X_scaled: (105, 4), Longitude de y: 105

LabelEncoder para mortes_categoria (Sem Outliers): Classes = ['1-baixo', '2-medio', '3-alto']

=== MODELAGEM DE mortes_categoria COM REGRESSÃO ORDINAL (SEM OUTLIERS) ===
Optimization terminated successfully.
         Current function value: 1.004477
         Iterations: 15
         Function evaluations: 18
         Gradient evaluations: 18

Resumo do modelo Ordinal:
                             OrderedModel Results                             
==============================================================================
Dep. Variable:       mortes_categoria   Log-Likelihood:                -105.47
Model:                   OrderedModel   AIC:                             222.9
Method:            Maximum Likelihood   BIC:                             238.9
Date:                Wed, 28 May 2025                                         
Time:                        01:10:41                                         
No. Observations:                 105                                         
Df Residuals:                      99                                         
Df Model:                           4                                         
==============================================================================
                 coef    std err          z      P>|z|      [0.025      0.975]
------------------------------------------------------------------------------
PCE            0.0060      0.047      0.127      0.899      -0.086       0.098
PSP           -0.0005      0.057     -0.009      0.992      -0.112       0.111
CT            -0.0739      0.041     -1.824      0.068      -0.153       0.006
EEC            0.0518      0.024      2.180      0.029       0.005       0.098
0/1           -1.3003      0.402     -3.236      0.001      -2.088      -0.513
1/2            0.5887      0.143      4.111      0.000       0.308       0.869
==============================================================================
Inconsistência detectada nas listas de metrics_summary:
  Modelo: 2 elementos
  Variável Objetivo: 2 elementos
  Dataset: 2 elementos
  Percentiles: 1 elementos
  Precisão Média: 2 elementos
  Precisão Desvio: 2 elementos
  F1-Score Médio: 2 elementos
  F1-Score Desvio: 2 elementos
  Precisão Completa: 2 elementos
  F1-Score Completa: 2 elementos
Corrigindo para tamanho comum: 2
Preenchendo 'Percentiles' com None até 2

=== TABELA DE MELHOR PERFORMANCE POR VARIÁVEL OBJETIVO (F1-Score) ===
      Modelo Variável Objetivo      Dataset      Precisão      F1-Score  Precisão Completa  F1-Score Completa
     XGBoost   casos_categoria Sem Outliers 0.552 ± 0.065 0.537 ± 0.059           0.523810           0.466279
OrdinalLogit  mortes_categoria Sem Outliers 0.514 ± 0.000 0.484 ± 0.000           0.514286           0.483906

=== RESUMO FINAL DE OVERFITTING ===

[Modelo: XGBoost] - [Target: casos_categoria] - [Dataset: Sem Outliers]
Δ Acurácia = -0.029
Δ F1-Score = -0.071
Sem evidências relevantes de overfitting.

[Modelo: OrdinalLogit] - [Target: mortes_categoria] - [Dataset: Sem Outliers]
Δ Acurácia = 0.000
Δ F1-Score = 0.000
Sem evidências relevantes de overfitting.

=== COMPARAÇÃO DE MODELOS PARA nivel_cruzado ===
Características usadas para Sem Outliers: ['PCE', 'PSP', 'CT', 'EEC']

=== COMPARAÇÃO (sem fuga): nivel_cruzado com XGBoost + Cross-Validation ===
Acurácia média CV: 0.514
F1-score média CV: 0.504

=== ANÁLISE ESTATÍSTICA - SENSIBILIDADE A OUTLIERS ===

--- Dataset: Sem Outliers ---

=== ANÁLISE ESTATÍSTICA: CASOS_CATEGORIA vs nivel_IE ===

Teste ANOVA/Kruskal-Wallis (Diferenças entre grupos):

Tamanhos de grupo para casos_categoria:
Grupo 1-baixo: 30 observações
Grupo 2-medio: 41 observações
Grupo 3-alto: 34 observações
Todos os grupos têm pelo menos 5 observações. Verificando suposições para ANOVA...
Resultado do teste de normalidade (Shapiro-Wilk): Não normal
Resultado do teste de homogeneidade de variâncias (Levene): Não homogêneo
As suposições de normalidade e/ou homogeneidade de variâncias não são atendidas. Usando Kruskal-Wallis...
Kruskal-Wallis para indice_IE por casos_categoria: H=18.26, p=0.0001
Tamanho do efeito (eta-quadrado): η² = 0.159
Tamanho do efeito: Grande (η² ≥ 0.14).

Kruskal-Wallis significativo. Executando o teste post-hoc de Dunn com correção de Bonferroni...

Resultados do teste de Dunn (valores de p ajustados):
          1-baixo   2-medio    3-alto
1-baixo  1.000000  0.189453  0.000069
2-medio  0.189453  1.000000  0.024348
3-alto   0.000069  0.024348  1.000000

Pares com diferenças significativas (p < 0.05):
1-baixo vs 3-alto: p = 0.0001
2-medio vs 3-alto: p = 0.0243

Tabela de contingência (casos_categoria vs nivel_IE):
 casos_categoria  1-baixo  2-medio  3-alto
nivel_IE                                 
1-baixo                3       15      20
2-medio               12       12       9
3-alto                15       14       5
Teste Qui-quadrado (Asociación): χ² = 17.72, p = 0.001
Associação significativa entre nivel_IE y casos_categoria
Cramér V (bootstrap 95% IC): 0.313 [0.211, 0.415]

=== ANÁLISE ESTATÍSTICA: MORTES_CATEGORIA vs nivel_IE ===

Teste ANOVA/Kruskal-Wallis (Diferenças entre grupos):

Tamanhos de grupo para mortes_categoria:
Grupo 3-alto: 26 observações
Grupo 1-baixo: 40 observações
Grupo 2-medio: 39 observações
Todos os grupos têm pelo menos 5 observações. Verificando suposições para ANOVA...
Resultado do teste de normalidade (Shapiro-Wilk): Não normal
Resultado do teste de homogeneidade de variâncias (Levene): Homogêneas
As suposições de normalidade e/ou homogeneidade de variâncias não são atendidas. Usando Kruskal-Wallis...
Kruskal-Wallis para indice_IE por mortes_categoria: H=6.92, p=0.0314
Tamanho do efeito (eta-quadrado): η² = 0.048
Tamanho do efeito: Pequeno (0.01 ≤ η² < 0.06).

Kruskal-Wallis significativo. Executando o teste post-hoc de Dunn com correção de Bonferroni...

Resultados do teste de Dunn (valores de p ajustados):
          1-baixo  2-medio    3-alto
1-baixo  1.000000  0.13204  0.048208
2-medio  0.132040  1.00000  1.000000
3-alto   0.048208  1.00000  1.000000

Pares com diferenças significativas (p < 0.05):
3-alto vs 2-medio: p = 0.0482

Tabela de contingência (mortes_categoria vs nivel_IE):
 mortes_categoria  1-baixo  2-medio  3-alto
nivel_IE                                  
1-baixo                 8       16      14
2-medio                14       13       6
3-alto                 18       10       6
Teste Qui-quadrado (Asociación): χ² = 9.38, p = 0.052
Não há associação significativa entre nivel_IE y mortes_categoria
Cramér V (bootstrap 95% IC): 0.241 [0.125, 0.355]

=== ANÁLISE ESTATÍSTICA: NIVEL_CRUZADO vs nivel_IE ===

Teste ANOVA/Kruskal-Wallis (Diferenças entre grupos):

Tamanhos de grupo para nivel_cruzado:
Grupo 1-baixo: 36 observações
Grupo 2-medio: 34 observações
Grupo 3-alto: 35 observações
Todos os grupos têm pelo menos 5 observações. Verificando suposições para ANOVA...
Resultado do teste de normalidade (Shapiro-Wilk): Não normal
Resultado do teste de homogeneidade de variâncias (Levene): Homogêneas
As suposições de normalidade e/ou homogeneidade de variâncias não são atendidas. Usando Kruskal-Wallis...
Kruskal-Wallis para indice_IE por nivel_cruzado: H=18.46, p=0.0001
Tamanho do efeito (eta-quadrado): η² = 0.161
Tamanho do efeito: Grande (η² ≥ 0.14).

Kruskal-Wallis significativo. Executando o teste post-hoc de Dunn com correção de Bonferroni...

Resultados do teste de Dunn (valores de p ajustados):
          1-baixo   2-medio   3-alto
1-baixo  1.000000  0.311489  0.00006
2-medio  0.311489  1.000000  0.02896
3-alto   0.000060  0.028960  1.00000

Pares com diferenças significativas (p < 0.05):
1-baixo vs 3-alto: p = 0.0001
2-medio vs 3-alto: p = 0.0290

Tabela de contingência (nivel_cruzado vs nivel_IE):
 nivel_cruzado  1-baixo  2-medio  3-alto
nivel_IE                               
1-baixo              5       12      21
2-medio             13       11       9
3-alto              18       11       5
Teste Qui-quadrado (Asociación): χ² = 18.05, p = 0.001
Associação significativa entre nivel_IE y nivel_cruzado
Cramér V (bootstrap 95% IC): 0.315 [0.197, 0.417]

=== TABELA COMPARATIVA DE ANÁLISES ESTATÍSTICAS ===
     Dataset           Target  Kruskal η²  Kruskal p-valor  Qui-quadrado p-valor
Sem Outliers  casos_categoria    0.159456         0.000108              0.001397
Sem Outliers mortes_categoria    0.048247         0.031411              0.052222
Sem Outliers    nivel_cruzado    0.161362         0.000098              0.001206
